import{d as w,J as N,c as D,r as f,o as $,G as M,w as A,a as o,g as _,f as s,h as U,t as u,i as p,b as V,k as B,_ as C,e as l}from"./DW3SVq1p.js";import{D as E}from"./Cv5foL5a.js";const T={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},S={class:"max-w-2xl mx-auto px-4 py-8"},j={class:"rounded-xl bg-white dark:bg-slate-800 p-6 shadow space-y-4"},z={class:"flex items-center gap-2 mb-4"},F={key:0,class:"text-sm text-slate-500 dark:text-slate-400"},G={key:1,class:"space-y-4"},H={class:"flex items-center gap-4"},I=["src","alt"],J={class:"flex-1"},R={class:"font-medium text-slate-900 dark:text-slate-100"},q={key:0,class:"text-sm text-slate-600 dark:text-slate-400 mt-1"},K={key:0,class:"text-xs text-slate-400 dark:text-slate-500 ml-1"},O={key:1,class:"text-xs text-slate-400 dark:text-slate-500 mt-1"},P={key:2,class:"text-sm text-slate-500 dark:text-slate-400"},Y=w({__name:"[id]",setup(Q){const g=N(),n=D(()=>{const t=g.params.id;return t&&(Array.isArray(t)?t[0]:t)||""}),a=f(null),r=f(!0);function h(e){if(!e)return"";const t=new Date(e),d=new Date().getTime()-t.getTime(),c=Math.floor(d/6e4),m=Math.floor(d/36e5),v=Math.floor(d/864e5);if(c<1)return"刚刚";if(c<60)return`${c}分钟前`;if(m<24)return`${m}小时前`;if(v<7)return`${v}天前`;const b=t.getMonth()+1,y=t.getDate();return`${b}月${y}日`}function k(e){const t=e.target;t.src!=="/assets/images/xiaobai/xiaobai-2.png"&&(t.src="/assets/images/xiaobai/xiaobai-2.png")}async function x(e){if(!e||e==="undefined"){r.value=!1,a.value=null;return}r.value=!0;try{const t=await B(`/api/user/${e}`);a.value=t.user}catch(t){console.error("加载用户信息失败:",t),a.value=null}finally{r.value=!1}}return $(async()=>{n.value?await x(n.value):(r.value=!1,M("/user/couple"))}),A(n,async e=>{e&&await x(e)}),(e,t)=>{const i=C;return l(),o("div",T,[_(E),s("div",S,[s("div",j,[s("div",z,[_(i,{to:"/user/couple",class:"text-sm text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"},{default:U(()=>[...t[0]||(t[0]=[p("← 返回",-1)])]),_:1})]),t[2]||(t[2]=s("div",{class:"text-lg"},"用户资料",-1)),r.value?(l(),o("div",F,"加载中…")):a.value?(l(),o("div",G,[s("div",H,[s("img",{src:a.value.avatarUrl||"/assets/images/xiaobai/xiaobai-2.png",alt:a.value.nickName,loading:"lazy",class:"w-16 h-16 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700",onError:k},null,40,I),s("div",J,[s("div",R,u(a.value.nickName),1),a.value.status?(l(),o("div",q,[p(" 状态："+u(a.value.status)+" ",1),a.value.statusUpdatedAt?(l(),o("span",K," ("+u(h(a.value.statusUpdatedAt))+") ",1)):V("",!0)])):(l(),o("div",O,"暂无状态"))])]),t[1]||(t[1]=s("div",{class:"border-t border-slate-200 dark:border-slate-700 pt-4"},[s("div",{class:"text-sm text-slate-500 dark:text-slate-400"},[s("div",{class:"mb-2"},"这是你的情侣伙伴"),s("div",null,"你们共同拥有：日常记录、愿望清单、留言板和纪念日")])],-1))])):(l(),o("div",P,"用户不存在或无权查看"))])])])}}});export{Y as default};
